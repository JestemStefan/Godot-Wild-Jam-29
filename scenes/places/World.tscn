[gd_scene load_steps=12 format=2]

[ext_resource path="res://scenes/places/Environment.tscn" type="PackedScene" id=1]
[ext_resource path="res://scenes/places/Region1.tscn" type="PackedScene" id=2]
[ext_resource path="res://scenes/entities/PlayerCharacter.tscn" type="PackedScene" id=5]
[ext_resource path="res://src/places/world.gd" type="Script" id=7]
[ext_resource path="res://scenes/entities/Airship.tscn" type="PackedScene" id=8]

[sub_resource type="QuadMesh" id=1]
size = Vector2( 2, 2 )

[sub_resource type="Shader" id=2]
code = "shader_type spatial;
render_mode unshaded, skip_vertex_transform;

uniform sampler2D background;

void vertex() {
	VERTEX.x += 0.0;
	POSITION = vec4(VERTEX.xy, 0.999999, 1.0);
}

void fragment() {
	ALBEDO = texture(background, SCREEN_UV).rgb;
}"

[sub_resource type="ViewportTexture" id=3]
flags = 4
viewport_path = NodePath("Level/Viewport/Background/Viewport")

[sub_resource type="ShaderMaterial" id=4]
resource_local_to_scene = true
shader = SubResource( 2 )
shader_param/background = SubResource( 3 )

[sub_resource type="ProceduralSky" id=5]
sky_top_color = Color( 0.384314, 0.698039, 0.870588, 1 )
sky_horizon_color = Color( 0.74902, 0.819608, 0.87451, 1 )
ground_bottom_color = Color( 0.560784, 0.807843, 0.941176, 1 )
ground_horizon_color = Color( 0.74902, 0.819608, 0.87451, 1 )
sun_longitude = 180.0
sun_energy = 0.2

[sub_resource type="Environment" id=6]
background_mode = 2
background_sky = SubResource( 5 )
ambient_light_color = Color( 0.721569, 0.670588, 0.670588, 1 )
ambient_light_energy = 1.83
ambient_light_sky_contribution = 0.86

[node name="World" type="Spatial"]
process_priority = 5
script = ExtResource( 7 )

[node name="Tween" type="Tween" parent="."]

[node name="Level" type="ViewportContainer" parent="."]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
stretch = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Viewport" type="Viewport" parent="Level"]
size = Vector2( 1024, 600 )
own_world = true
handle_input_locally = false
msaa = 2
render_target_update_mode = 0

[node name="Player" parent="Level/Viewport" instance=ExtResource( 5 )]
transform = Transform( 0.999959, 0, -0.00902323, 0, 1, 0, 0.00902323, 0, 0.999959, -2222.24, 0.115714, 2300 )
collision_layer = 2147483649

[node name="Airship" parent="Level/Viewport" instance=ExtResource( 8 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2232, 5.07033, 2268.88 )
acceleration = 200.0
max_speed = 500.0
fuel = 20.0

[node name="Region1" parent="Level/Viewport" instance=ExtResource( 2 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -2232, -24.8924, 2300 )

[node name="Background" type="MeshInstance" parent="Level/Viewport"]
cast_shadow = 0
extra_cull_margin = 16384.0
mesh = SubResource( 1 )
material/0 = SubResource( 4 )

[node name="Viewport" type="Viewport" parent="Level/Viewport/Background"]
size = Vector2( 512, 300 )
own_world = true
msaa = 2
keep_3d_linear = true

[node name="Camera" type="Camera" parent="Level/Viewport/Background/Viewport"]
near = 5.0
far = 10000.0

[node name="Environment" parent="Level/Viewport/Background/Viewport" instance=ExtResource( 1 )]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Level/Viewport"]
environment = SubResource( 6 )

[node name="DirectionalLight" type="DirectionalLight" parent="Level/Viewport"]
transform = Transform( 0.707107, -0.5, 0.5, 0, 0.707107, 0.707107, -0.707107, -0.5, 0.5, 0, 0, 0 )

[node name="Map" type="ViewportContainer" parent="."]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
stretch = true
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Viewport" type="Viewport" parent="Map"]
size = Vector2( 1024, 600 )
own_world = true
handle_input_locally = false
msaa = 2
render_target_update_mode = 0

[node name="CamRoot" type="Spatial" parent="Map/Viewport"]
transform = Transform( -8.14603e-07, 0, 5, 0, 5, 0, -5, 0, -8.14603e-07, 0, 0, 0 )

[node name="Camera" type="Camera" parent="Map/Viewport/CamRoot"]
transform = Transform( -3.25841e-08, 0.141421, -0.141421, 0, 0.141421, 0.141421, 0.2, 2.30405e-08, -2.30405e-08, -97.2295, 106.452, -3.05176e-05 )
current = true
far = 8000.0

[node name="CamRemote" type="RemoteTransform" parent="Map/Viewport"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 5 )
remote_path = NodePath("../../CamRoot")
update_rotation = false
update_scale = false

[node name="AirshipDep" parent="Map/Viewport" instance=ExtResource( 8 )]
transform = Transform( -8.14603e-07, 0, 5, 0, 5, 0, -5, 0, -8.14603e-07, -2232, -24, 2300.45 )
visible = false
in_map = true
acceleration = 200.0
max_speed = 500.0

[node name="Player" parent="Map/Viewport/AirshipDep" instance=ExtResource( 5 )]
transform = Transform( -1, 0, -8.74227e-08, 0, 1, 0, 8.74227e-08, 0, -1, 0.00012207, 7.6439, -7.74463 )

[node name="Environment" parent="Map/Viewport" instance=ExtResource( 1 )]
